## å¼•è¨€

æ ˆç»“æ„å¾ˆç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ•°ç»„å°±èƒ½æ¨¡æ‹Ÿå‡ºä¸€ä¸ªæ ˆç»“æ„ï¼Œä½†ä»…ä»…ä»‹ç»æ ˆç»“æ„å°±å¤ªä¸å‰ç«¯äº†ï¼Œæœ¬èŠ‚ä»æ ˆç»“æ„å¼€å§‹å»¶ä¼¸åˆ°æµè§ˆå™¨ä¸­ JavaScript è¿è¡Œæœºåˆ¶ï¼Œè¿˜æœ‰å­˜å‚¨æœºåˆ¶ä¸Šç”¨åˆ°çš„æ ˆç»“æ„åŠç›¸å…³æ•°æ®ç»“æ„ï¼Œä¸€æ–‡åƒé€æ‰€æœ‰çš„å‰ç«¯æ ˆçŸ¥è¯†ã€‚

ä»¥åå†æåˆ°æ ˆæ—¶ï¼Œæˆ‘ä»¬ä¸å†ä»…é™äº LIFO äº†ï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰æ·±åº¦çš„æ ˆã€‚

è¿™éƒ¨åˆ†æ˜¯å‰ç«¯è¿›é˜¶èµ„æ·±å¿…å¤‡ï¼Œå¦‚æœä½ æƒ³æ‰“é€ é«˜æ€§èƒ½çš„å‰ç«¯åº”ç”¨ï¼Œä¹Ÿéœ€è¦äº†è§£è¿™å—ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯é¢è¯•çš„å¸¸è§è€ƒå¯Ÿç‚¹ã€‚

ç†è§£æ ˆå¯¹äºæˆ‘ä»¬ç†è§£ JavaScript è¯­è¨€è‡³å…³é‡è¦ï¼Œæœ¬æ–‡ä¸»è¦ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä»‹ç»æ ˆï¼š

- é¦–å…ˆä»‹ç»æ ˆåŠä»£ç å®ç°
- ä»‹ç» JavaScript è¿è¡Œæœºåˆ¶åŠæ ˆåœ¨å…¶ä¸­çš„åº”ç”¨
- è¯¦ç»†ä»‹ç»è°ƒç”¨æ ˆåŠæˆ‘ä»¬å¼€å‘ä¸­å¦‚ä½•åˆ©ç”¨è°ƒç”¨æ ˆ
- JS å†…å­˜æœºåˆ¶ï¼šæ ˆï¼ˆåŸºæœ¬ç±»å‹ã€å¼•ç”¨ç±»å‹åœ°å€ï¼‰ä¸å †ï¼ˆå¼•ç”¨ç±»å‹æ•°æ®ï¼‰
- æœ€åæ¥ä¸€ä»½æ€»ç»“ä¸å­—èŠ‚&leetcode åˆ·é¢˜ï¼Œå®ç°æœ€å°æ ˆ

æœ¬èŠ‚åƒé€æ ˆåŸç†ï¼Œä¹‹åå‡ å¤©ä¼šæ¯æ—¥ä¸€é¢˜ï¼Œåˆ·é€æ ˆé¢˜ç›®ï¼Œä¸‹é¢è¿›å…¥æ­£æ–‡å§ ğŸ‘

## ä¸€ã€ æ ˆ

æ ˆæ˜¯ä¸€ç§éµä»åè¿›å…ˆå‡º (LIFO / Last In First Out) åŸåˆ™çš„æœ‰åºé›†åˆï¼Œå®ƒçš„ç»“æ„ç±»ä¼¼å¦‚ä¸‹ï¼š

![](https://camo.githubusercontent.com/2a515a4e568739c18c3abcc4d8802d74b5660af8/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343139363033303737382d31303762396536632d663038642d346361612d386563662d6664313761323839336130652e706e67)

æ ˆçš„æ“ä½œä¸»è¦æœ‰ï¼š `push(e)` (è¿›æ ˆ)ã€ `pop()` (å‡ºæ ˆ)ã€ `isEmpty()` (åˆ¤æ–­æ˜¯å¦æ˜¯ç©ºæ ˆ)ã€`size()` (æ ˆå¤§å°)ï¼Œä»¥åŠ `clear()` æ¸…ç©ºæ ˆï¼Œå…·ä½“å®ç°ä¹Ÿå¾ˆç®€å•ã€‚

## äºŒã€ä»£ç å®ç°

```js
function Stack() {
  let items = []
  this.push = function (e) {
    items.push(e)
  }
  this.pop = function () {
    return items.pop()
  }
  this.isEmpty = function () {
    return items.length === 0
  }
  this.size = function () {
    return items.length
  }
  this.clear = function () {
    items = []
  }
}
```

**æŸ¥æ‰¾**ï¼šä»æ ˆå¤´å¼€å§‹æŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)

**æ’å…¥æˆ–åˆ é™¤**ï¼šè¿›æ ˆä¸å‡ºæ ˆçš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)

## ä¸‰ã€æµè§ˆå™¨ä¸­ JS è¿è¡Œæœºåˆ¶

æˆ‘ä»¬çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œæ‰€è°“å•çº¿ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ JavaScript å¼•æ“ä¸­è´Ÿè´£è§£é‡Šå’Œæ‰§è¡Œ JavaScript ä»£ç çš„çº¿ç¨‹å”¯ä¸€ï¼ŒåŒä¸€æ—¶é—´ä¸Šåªèƒ½æ‰§è¡Œä¸€ä»¶ä»»åŠ¡ã€‚

ä¸ºä»€ä¹ˆæ˜¯å•çº¿ç¨‹çš„å–ƒï¼Ÿè¿™æ˜¯å› ä¸º JavaScript å¯ä»¥ä¿®æ”¹ DOM ç»“æ„ï¼Œå¦‚æœ JavaScript å¼•æ“çº¿ç¨‹ä¸æ˜¯å•çº¿ç¨‹çš„ï¼Œé‚£ä¹ˆå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ®µ JavaScriptï¼Œå¦‚æœè¿™å¤šæ®µ JavaScript éƒ½ä¿®æ”¹ DOMï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç° DOM å†²çªã€‚

ä¸ºäº†é¿å… DOM æ¸²æŸ“çš„å†²çªï¼Œå¯ä»¥é‡‡ç”¨å•çº¿ç¨‹æˆ–è€…æ­»é”ï¼ŒJavaScript é‡‡ç”¨äº†å•çº¿ç¨‹æ–¹æ¡ˆã€‚

ä½†å•çº¿ç¨‹æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœä»»åŠ¡é˜Ÿåˆ—é‡Œæœ‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œå¯¼è‡´è¿™ä¸ªä»»åŠ¡åé¢çš„ä»»åŠ¡ä¸€ç›´æ’é˜Ÿç­‰å¾…ï¼Œå°±ä¼šå‘ç”Ÿé¡µé¢å¡æ­»ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJavaScript å°†ä»»åŠ¡çš„æ‰§è¡Œæ¨¡å¼åˆ†ä¸ºä¸¤ç§ï¼šåŒæ­¥å’Œå¼‚æ­¥ã€‚

åŒæ­¥

```js
// åŒæ­¥ä»»åŠ¡
let a = 1
console.log(a) // 1
```

å¼‚æ­¥

```js
// å¼‚æ­¥ä»»åŠ¡
setTimeout(() => {
  console.log('æ—¶é—´åˆ°')
}, 1000)
```

åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ï¼ˆè¿™é‡Œçš„ä¸»çº¿ç¨‹å°±æ˜¯ JavaScript å¼•æ“çº¿ç¨‹ï¼‰ä¸Šæ‰§è¡Œï¼Œä¼šå½¢æˆä¸€ä¸ª è°ƒç”¨æ ˆ ï¼Œåˆç§° **æ‰§è¡Œæ ˆ**ï¼›

é™¤äº†ä¸»çº¿ç¨‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¹Ÿç§°æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ï¼Œç”¨äºç®¡ç†å¼‚æ­¥ä»»åŠ¡çš„ **äº‹ä»¶å›è°ƒ** ï¼Œåœ¨ **è°ƒç”¨æ ˆ** çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œç³»ç»Ÿä¼šæ£€æŸ¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œçœ‹æ˜¯å¦æœ‰å¯ä»¥æ‰§è¡Œçš„å¼‚æ­¥ä»»åŠ¡ã€‚

**æ³¨æ„ï¼šä»»åŠ¡é˜Ÿåˆ—å­˜æ”¾çš„æ˜¯å¼‚æ­¥ä»»åŠ¡çš„äº‹ä»¶å›è°ƒ**

ä¾‹å¦‚ä¸Šä¾‹ï¼š

```js
setTimeout(() => {
  console.log('æ—¶é—´åˆ°')
}, 1000)
```

åœ¨æ‰§è¡Œè¿™æ®µä»£ç æ—¶ï¼Œå¹¶ä¸ä¼šç«‹åˆ»æ‰“å° ï¼Œåªæœ‰å®šæ—¶ç»“æŸåï¼ˆ1sï¼‰æ‰æ‰“å°ã€‚ `setTimeout` æœ¬èº«æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œæ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—çš„æ˜¯å®ƒçš„å›è°ƒå‡½æ•°ã€‚

ä¸‹é¢æˆ‘ä»¬é‡ç‚¹çœ‹ä¸€ä¸‹ä¸»çº¿ç¨‹ä¸Šçš„è°ƒç”¨æ ˆã€‚

## å››ã€è°ƒç”¨æ ˆ

æˆ‘ä»¬ä»ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ä»‹ç»è°ƒç”¨æ ˆï¼š

- è°ƒç”¨æ ˆçš„ç”¨æ¥åšä»€ä¹ˆ
- åœ¨å¼€å‘ä¸­ï¼Œå¦‚ä½•åˆ©ç”¨è°ƒç”¨æ ˆ

### 1. è°ƒç”¨æ ˆçš„èŒè´£

æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScript ä¸­æœ‰å¾ˆå¤šå‡½æ•°ï¼Œç»å¸¸ä¼šå‡ºç°ä¸€ä¸ªå‡½æ•°è°ƒç”¨å¦å¤–ä¸€ä¸ªå‡½æ•°çš„æƒ…å†µï¼Œ**è°ƒç”¨æ ˆå°±æ˜¯ç”¨æ¥ç®¡ç†å‡½æ•°è°ƒç”¨å…³ç³»çš„ä¸€ç§æ ˆç»“æ„** ã€‚

é‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•å»ç®¡ç†å‡½æ•°è°ƒç”¨å…³ç³»å–ƒï¼Ÿæˆ‘ä»¬ä¸¾ä¾‹è¯´æ˜ï¼š

```js
var a = 1
function add(a) {
  var b = 2
  let c = 3
  return a + b + c
}

// å‡½æ•°è°ƒç”¨
add(a)
```

è¿™æ®µä»£ç å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ª `add` å‡½æ•°ï¼Œç„¶åè°ƒç”¨äº†å®ƒã€‚

ä¸‹é¢æˆ‘ä»¬å°±ä¸€æ­¥æ­¥çš„ä»‹ç»æ•´ä¸ªå‡½æ•°è°ƒç”¨æ‰§è¡Œçš„è¿‡ç¨‹ã€‚

åœ¨æ‰§è¡Œè¿™æ®µä»£ç ä¹‹å‰ï¼ŒJavaScript å¼•æ“ä¼šå…ˆåˆ›å»ºä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒ…å«æ‰€æœ‰å·²å£°æ˜çš„å‡½æ•°ä¸å˜é‡ï¼š

![](https://camo.githubusercontent.com/bf84fdab81e2fc1c9f8555dc231059e9bc61ab4a/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343632363539333435382d31316535643637342d326163652d343230392d613264332d3961343438343937396130352e706e67)

ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œä»£ç ä¸­çš„å…¨å±€å˜é‡ `a` åŠå‡½æ•° `add` ä¿å­˜åœ¨å˜é‡ç¯å¢ƒä¸­ã€‚

æ‰§è¡Œä¸Šä¸‹æ–‡å‡†å¤‡å¥½åï¼Œå¼€å§‹æ‰§è¡Œå…¨å±€ä»£ç ï¼Œé¦–å…ˆæ‰§è¡Œ `a = 1` çš„èµ‹å€¼æ“ä½œï¼Œ

![](https://camo.githubusercontent.com/5fdbbf37e6fab2ad2db214909807eb309913dbbd/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343632363831313336332d61613361396636622d356162642d343130302d383765322d3635393834376430343530302e706e67)

èµ‹å€¼å®Œæˆå a çš„å€¼ç”± undefined å˜ä¸º 1ï¼Œç„¶åæ‰§è¡Œ add å‡½æ•°ï¼ŒJavaScript åˆ¤æ–­å‡ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- é¦–å…ˆï¼Œä»å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå–å‡º add å‡½æ•°ä»£ç 
- å…¶æ¬¡ï¼Œå¯¹ add å‡½æ•°çš„è¿™æ®µä»£ç è¿›è¡Œç¼–è¯‘ï¼Œå¹¶åˆ›å»ºè¯¥å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œå¯æ‰§è¡Œä»£ç ï¼Œå¹¶å°†æ‰§è¡Œä¸Šä¸‹æ–‡å‹å…¥æ ˆä¸­

![](https://camo.githubusercontent.com/f11da6f73438b5042687dac14e0b7dd067c251dc/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343632383939313737372d30656463303536342d623037662d343662342d393539302d6430333865393438626236392e706e67)

- ç„¶åï¼Œæ‰§è¡Œä»£ç ï¼Œè¿”å›ç»“æœï¼Œå¹¶å°† add çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä¹Ÿä¼šä»æ ˆé¡¶éƒ¨å¼¹å‡ºï¼Œæ­¤æ—¶è°ƒç”¨æ ˆä¸­å°±åªå‰©ä¸‹å…¨å±€ä¸Šä¸‹æ–‡äº†ã€‚

![](https://camo.githubusercontent.com/b54b18b1e02bb7fb64f57138f519e9fb6d11a1ca/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343632383531303134392d64663038313235382d633035352d343435332d613166622d3738363766343365343831302e706e67)

è‡³æ­¤ï¼Œæ•´ä¸ªå‡½æ•°è°ƒç”¨æ‰§è¡Œç»“æŸäº†ã€‚

æ‰€ä»¥è¯´ï¼Œè°ƒç”¨æ ˆæ˜¯ JavaScript ç”¨æ¥ç®¡ç†å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒè®°å½•äº†å½“å‰å‡½æ•°æ‰§è¡Œçš„ä½ç½®ï¼Œå“ªä¸ªå‡½æ•°æ­£åœ¨è¢«æ‰§è¡Œã€‚ å¦‚æœæˆ‘ä»¬æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šä¸ºå‡½æ•°åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡å¹¶æ”¾å…¥æ ˆé¡¶ã€‚ å¦‚æœæˆ‘ä»¬ä»å‡½æ•°è¿”å›ï¼Œå°±å°†å®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆé¡¶å¼¹å‡ºã€‚ ä¹Ÿå¯ä»¥è¯´è°ƒç”¨æ ˆæ˜¯ç”¨æ¥ç®¡ç†è¿™ç§æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ ˆï¼Œæˆ–ç§°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆæ‰§è¡Œæ ˆï¼‰ã€‚

### 2. æ‡‚è°ƒç”¨æ ˆçš„å¼€å‘äººå‘˜æœ‰å“ªäº›ä¼˜åŠ¿

**æ ˆæº¢å‡º**

åœ¨æˆ‘ä»¬æ‰§è¡Œ JavaScript ä»£ç çš„æ—¶å€™ï¼Œæœ‰æ—¶ä¼šå‡ºç°æ ˆæº¢å‡ºçš„æƒ…å†µï¼š

![](https://camo.githubusercontent.com/9143471b120e020971be0f0f47d4ea7896630a74/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343534333238353430312d32356538613030342d663732392d343461302d396163362d3730653061353634323835642e706e67)

ä¸Šå›¾å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„æ ˆæº¢å‡ºï¼Œé‚£ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ç§é”™è¯¯å–ƒï¼Ÿ

æˆ‘ä»¬çŸ¥é“è°ƒç”¨æ ˆæ˜¯ç”¨æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒæ˜¯æœ‰å¤§å°çš„ï¼Œå½“å…¥æ ˆçš„ä¸Šä¸‹æ–‡è¿‡å¤šçš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæŠ¥æ ˆæº¢å‡ºï¼Œä¾‹å¦‚ï¼š

```js
function add() {
  return 1 + add()
}

add()
```

`add` å‡½æ•°ä¸æ–­çš„é€’å½’ï¼Œä¸æ–­çš„å…¥æ ˆï¼Œè°ƒç”¨æ ˆçš„å®¹é‡æœ‰é™ï¼Œå®ƒå°±æº¢å‡ºäº†ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œä¸€å®šè¦æ³¨æ„æ­¤ç±»ä»£ç çš„å‡ºç°ã€‚

**åœ¨æµè§ˆå™¨ä¸­è·å–è°ƒç”¨æ ˆä¿¡æ¯**

ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯æ–­ç‚¹è°ƒè¯•ï¼Œè¿™ç§å¾ˆç®€å•ï¼Œæˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­éƒ½ç”¨è¿‡ã€‚

ä¸€ç§æ˜¯ `console.trace()`

```js
function sum() {
  return add()
}
function add() {
  console.trace()
  return 1
}

// å‡½æ•°è°ƒç”¨
sum()
```

![](https://camo.githubusercontent.com/a5257581c85e22c727b43674c111247bcb3d43cb/68747470733a2f2f63646e2e6e6c61726b2e636f6d2f79757175652f302f323032302f706e672f3237333530362f313538343632393838363532322d38643635323639622d363830622d343864372d626133322d6234396530353331616435642e706e67)

## äº”ã€JS å†…å­˜æœºåˆ¶ï¼šæ ˆï¼ˆåŸºæœ¬ç±»å‹ã€å¼•è¨€ç±»å‹åœ°å€ï¼‰ä¸å †ï¼ˆå¼•ç”¨ç±»å‹æ•°æ®ï¼‰

åœ¨ JavaScript å¼€å‘æ—¥å¸¸ä¸­ï¼Œå‰ç«¯äººå‘˜å¾ˆå°‘æœ‰æœºä¼šäº†è§£å†…å­˜ï¼Œä½†å¦‚æœä½ æƒ³æˆä¸ºå‰ç«¯çš„ä¸“å®¶ï¼Œæ‰“é€ é«˜æ€§èƒ½çš„å‰ç«¯åº”ç”¨ï¼Œä½ å°±éœ€è¦äº†è§£è¿™ä¸€å—ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯é¢è¯•çš„å¸¸è§è€ƒå¯Ÿç‚¹ã€‚

JavaScript ä¸­çš„å†…å­˜ç©ºé—´ä¸»è¦åˆ†ä¸ºä¸‰ç§ç±»å‹ï¼š

- ä»£ç ç©ºé—´ï¼šä¸»è¦ç”¨æ¥å­˜æ”¾å¯æ‰§è¡Œä»£ç 
- æ ˆç©ºé—´ï¼šè°ƒç”¨æ ˆçš„å­˜å‚¨ç©ºé—´å°±æ˜¯æ ˆç©ºé—´ã€‚
- å †ç©ºé—´

ä»£ç ç©ºé—´ä¸»è¦ç”¨æ¥å­˜æ”¾å¯æ‰§è¡Œä»£ç çš„ã€‚æ ˆç©ºé—´åŠå †ç©ºé—´ä¸»è¦ç”¨æ¥å­˜æ”¾æ•°æ®çš„ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¸»è¦ä»‹ç»æ ˆç©ºé—´åŠå †ç©ºé—´ã€‚

JavaScript ä¸­çš„å˜é‡ç±»å‹æœ‰ `8` ç§ï¼Œå¯åˆ†ä¸ºä¸¤ç§ï¼šåŸºæœ¬ç±»å‹ã€å¼•ç”¨ç±»å‹

åŸºæœ¬ç±»å‹ï¼š

- `undefined`
- `null`
- `boolean`
- `number`
- `string`
- `bigint`
- `symbol`

å¼•ç”¨ç±»å‹ï¼š

- `object`

å…¶ä¸­ï¼ŒåŸºæœ¬ç±»å‹æ˜¯ä¿å­˜åœ¨æ ˆå†…å­˜ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œè€Œå¼•ç”¨ç±»å‹ä¿å­˜åœ¨å †å†…å­˜ä¸­ã€‚

### 1. æ ˆç©ºé—´

åŸºæœ¬ç±»å‹åœ¨å†…å­˜ä¸­å æœ‰å›ºå®šå¤§å°çš„ç©ºé—´ï¼Œæ‰€ä»¥å®ƒä»¬çš„å€¼ä¿å­˜åœ¨æ ˆç©ºé—´ï¼Œæˆ‘ä»¬é€šè¿‡ æŒ‰å€¼è®¿é—® ã€‚

ä¸€èˆ¬æ ˆç©ºé—´ä¸ä¼šå¾ˆå¤§ã€‚

### 2. å †ç©ºé—´

å¼•ç”¨ç±»å‹ï¼Œå€¼å¤§å°ä¸å›ºå®šï¼Œä½†æŒ‡å‘å€¼çš„æŒ‡é’ˆå¤§å°ï¼ˆå†…å­˜åœ°å€ï¼‰æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æŠŠå¯¹è±¡æ”¾å…¥å †ä¸­ï¼Œå°†å¯¹è±¡çš„åœ°å€æ”¾å…¥æ ˆä¸­ï¼Œè¿™æ ·ï¼Œåœ¨è°ƒç”¨æ ˆä¸­åˆ‡æ¢ä¸Šä¸‹æ–‡æ—¶ï¼Œåªéœ€è¦å°†æŒ‡é’ˆä¸‹ç§»åˆ°ä¸Šä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡çš„åœ°å€å°±å¯ä»¥äº†ï¼ŒåŒæ—¶ä¿è¯äº†æ ˆç©ºé—´ä¸ä¼šå¾ˆå¤§ã€‚

å½“æŸ¥è¯¢å¼•ç”¨ç±»å‹çš„å˜é‡æ—¶ï¼Œ å…ˆä»æ ˆä¸­è¯»å–å†…å­˜åœ°å€ï¼Œ ç„¶åå†é€šè¿‡åœ°å€æ‰¾åˆ°å †ä¸­çš„å€¼ã€‚å¯¹äºè¿™ç§ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åš **æŒ‰å¼•ç”¨è®¿é—®** ã€‚

ä¸€èˆ¬å †å†…å­˜ç©ºé—´å¾ˆå¤§ï¼Œèƒ½å­˜æ”¾å¾ˆå¤šæ•°æ®ï¼Œä½†å®ƒå†…å­˜åˆ†é…ä¸å›æ”¶éƒ½éœ€è¦èŠ±è´¹ä¸€å®šçš„æ—¶é—´ã€‚

ä¸¾ä¸ªä¾‹å­å¸®åŠ©ç†è§£ä¸€ä¸‹ï¼š

```js
var a = 1
function foo() {
  var b = 2
  var c = { name: 'an' }
}

// å‡½æ•°è°ƒç”¨
foo()
```

![](https://camo.githubusercontent.com/9d406023463489b17a5c25266deef9dbe639738c/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303230303432313230323832372e706e67)

åŸºæœ¬ç±»å‹ï¼ˆæ ˆç©ºé—´ï¼‰ä¸å¼•ç”¨ç±»å‹ï¼ˆå †ç©ºé—´ï¼‰çš„å­˜å‚¨æ–¹å¼å†³å®šäº†ï¼šåŸºæœ¬ç±»å‹èµ‹å€¼æ˜¯å€¼èµ‹å€¼ï¼Œè€Œå¼•ç”¨ç±»å‹èµ‹å€¼æ˜¯åœ°å€èµ‹å€¼ã€‚

```js
// å€¼èµ‹å€¼
var a = 1
var b = a
a = 2
console.log(b)
// 1
// b ä¸å˜

// åœ°å€èµ‹å€¼
var a1 = { name: 'an' }
var b1 = a1
a1.name = 'bottle'
console.log(b1)
// {name: "bottle"}
// b1 å€¼æ”¹å˜
```

### 3. åƒåœ¾å›æ”¶

JavaScript ä¸­çš„åƒåœ¾æ•°æ®éƒ½æ˜¯ç”±åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶çš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾ã€‚æ‰€ä»¥å¤§éƒ¨åˆ†çš„å¼€å‘äººå‘˜å¹¶ä¸äº†è§£åƒåœ¾å›æ”¶ï¼Œä½†è¿™éƒ¨åˆ†ä¹Ÿæ˜¯å‰ç«¯è¿›é˜¶èµ„æ·±å¿…å¤‡ï¼

#### å›æ”¶æ ˆç©ºé—´

åœ¨ JavaScript æ‰§è¡Œä»£ç æ—¶ï¼Œä¸»çº¿ç¨‹ä¸Šä¼šå­˜åœ¨ `ESP` æŒ‡é’ˆï¼Œç”¨æ¥æŒ‡å‘è°ƒç”¨æ ˆä¸­å½“å‰æ­£åœ¨æ‰§è¡Œçš„ä¸Šä¸‹æ–‡ï¼Œå¦‚ä¸‹å›¾ï¼Œå½“å‰æ­£åœ¨æ‰§è¡Œ `foo` å‡½æ•°ï¼š

![](https://camo.githubusercontent.com/f34de6205f02c3bbf15478499dd16053221237a1/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303230303432313230333834372e706e67)

å½“ `foo` å‡½æ•°æ‰§è¡Œå®Œæˆåï¼ŒESP å‘ä¸‹æŒ‡å‘å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæ­¤æ—¶éœ€è¦é”€æ¯ `foo` å‡½æ•°ã€‚

æ€ä¹ˆé”€æ¯å–ƒï¼Ÿ

å½“ ESP æŒ‡é’ˆæŒ‡å‘å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œfoo å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å·²ç»æ˜¯æ— æ•ˆçš„äº†ï¼Œå½“æœ‰æ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡è¿›æ¥æ—¶ï¼Œå¯ä»¥ç›´æ¥è¦†ç›–è¿™å—å†…å­˜ç©ºé—´ã€‚

![](https://camo.githubusercontent.com/2f290926de1f052a6606d8e38dfd574937284379/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303230303432313230343031342e706e67)

å³ï¼š**JavaScript å¼•æ“é€šè¿‡å‘ä¸‹ç§»åŠ¨ ESP æŒ‡é’ˆæ¥é”€æ¯å­˜æ”¾åœ¨æ ˆç©ºé—´ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡**ã€‚

#### å›æ”¶å †ç©ºé—´

V8 ä¸­æŠŠå †åˆ†æˆæ–°ç”Ÿä»£ä¸è€ç”Ÿä»£ä¸¤ä¸ªåŒºåŸŸï¼š

- æ–°ç”Ÿä»£ï¼šç”¨æ¥å­˜æ”¾ç”Ÿå­˜å‘¨æœŸè¾ƒçŸ­çš„å°å¯¹è±¡ï¼Œä¸€èˆ¬åªæ”¯æŒ 1 ï½ 8M çš„å®¹é‡
- è€ç”Ÿä»£ï¼šç”¨æ¥å­˜æ”¾ç”Ÿå­˜å‘¨æœŸè¾ƒé•¿çš„å¯¹è±¡æˆ–å¤§å¯¹è±¡

V8 å¯¹è¿™ä¸¤å—ä½¿ç”¨äº†ä¸åŒçš„å›æ”¶å™¨ï¼š

- æ–°ç”Ÿä»£ä½¿ç”¨å‰¯åƒåœ¾å›æ”¶å™¨
- è€ç”Ÿä»£ä½¿ç”¨ä¸»åƒåœ¾å›æ”¶å™¨

å…¶å®æ— è®ºå“ªç§åƒåœ¾å›æ”¶å™¨ï¼Œéƒ½é‡‡ç”¨äº†åŒæ ·çš„æµç¨‹ï¼ˆä¸‰æ­¥èµ°ï¼‰ï¼š

- **æ ‡è®°**ï¼š æ ‡è®°å †ç©ºé—´ä¸­çš„æ´»åŠ¨å¯¹è±¡ï¼ˆæ­£åœ¨ä½¿ç”¨ï¼‰ä¸éæ´»åŠ¨å¯¹è±¡ï¼ˆå¯å›æ”¶ï¼‰
- **åƒåœ¾æ¸…ç†**ï¼š å›æ”¶éæ´»åŠ¨å¯¹è±¡æ‰€å ç”¨çš„å†…å­˜ç©ºé—´
- **å†…å­˜æ•´ç†**ï¼š å½“è¿›è¡Œé¢‘ç¹çš„åƒåœ¾å›æ”¶æ—¶ï¼Œå†…å­˜ä¸­å¯èƒ½å­˜åœ¨å¤§é‡ä¸è¿ç»­çš„å†…å­˜ç¢ç‰‡ï¼Œå½“éœ€è¦åˆ†é…ä¸€ä¸ªéœ€è¦å ç”¨è¾ƒå¤§è¿ç»­å†…å­˜ç©ºé—´çš„å¯¹è±¡æ—¶ï¼Œå¯èƒ½å­˜åœ¨å†…å­˜ä¸è¶³çš„ç°è±¡ï¼Œæ‰€ä»¥ï¼Œè¿™æ—¶å°±éœ€è¦æ•´ç†è¿™äº›å†…å­˜ç¢ç‰‡ã€‚

å‰¯åƒåœ¾å›æ”¶å™¨ä¸ä¸»åƒåœ¾å›æ”¶å™¨è™½ç„¶éƒ½é‡‡ç”¨åŒæ ·çš„æµç¨‹ï¼Œä½†ä½¿ç”¨çš„å›æ”¶ç­–ç•¥ä¸ç®—æ³•æ˜¯ä¸åŒçš„ã€‚

#### å‰¯åƒåœ¾å›æ”¶å™¨

å®ƒé‡‡ç”¨ Scavenge ç®—æ³•åŠå¯¹è±¡æ™‹å‡ç­–ç•¥æ¥è¿›è¡Œåƒåœ¾å›æ”¶

æ‰€è°“ Scavenge ç®—æ³•ï¼Œå³æŠŠæ–°ç”Ÿä»£ç©ºé—´å¯¹åŠåˆ’åˆ†ä¸ºä¸¤ä¸ªåŒºåŸŸï¼Œä¸€åŠæ˜¯å¯¹è±¡åŒºåŸŸï¼Œä¸€åŠæ˜¯ç©ºé—²åŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

æ–°åŠ å…¥çš„å¯¹è±¡éƒ½åŠ å…¥å¯¹è±¡åŒºåŸŸï¼Œå½“å¯¹è±¡åŒºæ»¡çš„æ—¶å€™ï¼Œå°±æ‰§è¡Œä¸€æ¬¡åƒåœ¾å›æ”¶ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š

- æ ‡è®°ï¼šé¦–å…ˆè¦å¯¹åŒºåŸŸå†…çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼ˆæ´»åŠ¨å¯¹è±¡ã€éæ´»åŠ¨å¯¹è±¡ï¼‰
- åƒåœ¾æ¸…ç†ï¼šç„¶åè¿›è¡Œåƒåœ¾æ¸…ç†ï¼šå°†å¯¹è±¡åŒºçš„æ´»åŠ¨å¯¹è±¡å¤åˆ¶åˆ°ç©ºé—²åŒºåŸŸï¼Œå¹¶è¿›è¡Œæœ‰åºçš„æ’åˆ—ï¼Œå½“å¤åˆ¶å®Œæˆåï¼Œå¯¹è±¡åŒºåŸŸä¸ç©ºé—²åŒºåŸŸè¿›è¡Œç¿»è½¬ï¼Œç©ºé—²åŒºåŸŸæ™‹å‡ä¸ºå¯¹è±¡åŒºåŸŸï¼Œå¯¹è±¡åŒºåŸŸä¸ºç©ºé—²åŒºåŸŸ

ç¿»è½¬åï¼Œå¯¹è±¡åŒºåŸŸæ˜¯æ²¡æœ‰ç¢ç‰‡çš„ï¼Œæ­¤æ—¶ä¸éœ€è¦è¿›è¡Œç¬¬ä¸‰æ­¥ï¼ˆå†…å­˜æ•´ç†äº†ï¼‰
![](https://camo.githubusercontent.com/b22dc2b93609189fcabf57a89ca5589a1d512b5b/687474703a2f2f7265736f757263652e6d757969792e636e2f696d6167652f32303230303432313230343531352e706e67)

ä½†ï¼Œæ–°ç”Ÿä»£åŒºåŸŸå¾ˆå°çš„ï¼Œä¸€èˆ¬ 1 ï½ 8M çš„å®¹é‡ï¼Œæ‰€ä»¥å®ƒå¾ˆå®¹æ˜“æ»¡ï¼Œæ‰€ä»¥ï¼ŒJavaScript å¼•æ“é‡‡ç”¨å¯¹è±¡æ™‹å‡ç­–ç•¥æ¥å¤„ç†ï¼Œå³åªè¦å¯¹è±¡ç»è¿‡ä¸¤æ¬¡åƒåœ¾å›æ”¶ä¹‹åä¾ç„¶ç»§ç»­å­˜æ´»ï¼Œå°±ä¼šè¢«æ™‹å‡åˆ°è€ç”Ÿä»£åŒºåŸŸä¸­ã€‚

#### ä¸»åƒåœ¾å›æ”¶å™¨

è€ç”Ÿä»£åŒºåŸŸé‡Œé™¤äº†å­˜åœ¨ä»æ–°ç”Ÿä»£æ™‹å‡æ¥çš„å­˜æ´»æ—¶é—´ä¹…çš„å¯¹è±¡ï¼Œå½“é‡åˆ°å¤§å¯¹è±¡æ—¶ï¼Œå¤§å¯¹è±¡ä¹Ÿä¼šç›´æ¥åˆ†é…åˆ°è€ç”Ÿä»£ã€‚

æ‰€ä»¥ä¸»åƒåœ¾å›æ”¶å™¨ä¸»è¦ä¿å­˜å­˜æ´»ä¹…çš„æˆ–å ç”¨ç©ºé—´å¤§çš„å¯¹è±¡ï¼Œæ­¤æ—¶é‡‡ç”¨ Scavenge ç®—æ³•å°±ä¸åˆé€‚äº†ã€‚V8 ä¸­ä¸»åƒåœ¾å›æ”¶å™¨ä¸»è¦é‡‡ç”¨æ ‡è®°-æ¸…é™¤æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚

ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š

- æ ‡è®°ï¼šéå†è°ƒç”¨æ ˆï¼Œçœ‹è€ç”Ÿä»£åŒºåŸŸå †ä¸­çš„å¯¹è±¡æ˜¯å¦è¢«å¼•ç”¨ï¼Œè¢«å¼•ç”¨çš„å¯¹è±¡æ ‡è®°ä¸ºæ´»åŠ¨å¯¹è±¡ï¼Œæ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ï¼ˆå¾…æ¸…ç†ï¼‰æ ‡è®°ä¸ºåƒåœ¾æ•°æ®ã€‚
- åƒåœ¾æ¸…ç†ï¼šå°†æ‰€æœ‰åƒåœ¾æ•°æ®æ¸…ç†æ‰
- å†…å­˜æ•´ç†ï¼šæ ‡è®°-æ•´ç†ç­–ç•¥ï¼Œå°†æ´»åŠ¨å¯¹è±¡æ•´ç†åˆ°ä¸€èµ·

#### å¢é‡æ ‡è®°

V8 æµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œä½†ç”±äº JavaScript ä¹Ÿæ˜¯è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šçš„ï¼Œä¸€æ—¦æ‰§è¡Œåƒåœ¾å›æ”¶ï¼Œå°±è¦æ‰“æ–­ JavaScript çš„è¿è¡Œï¼Œå¯èƒ½ä¼šæˆ–å¤šæˆ–å°‘çš„é€ æˆé¡µé¢çš„å¡é¡¿ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œæ‰€ä»¥ V8 å†³å®šé‡‡ç”¨å¢é‡ æ ‡è®°ç®—æ³•å›æ”¶ï¼š

**å³æŠŠåƒåœ¾å›æ”¶æ‹†æˆä¸€ä¸ªä¸ªå°ä»»åŠ¡ï¼Œç©¿æ’åœ¨ JavaScript ä¸­æ‰§è¡Œã€‚**

### å…­ã€æ€»ç»“

æœ¬èŠ‚ä»æ ˆç»“æ„å¼€å§‹ä»‹ç»ï¼Œæ»¡è¶³åè¿›å…ˆå‡º (LIFO) åŸåˆ™çš„æœ‰åºé›†åˆï¼Œç„¶åé€šè¿‡æ•°ç»„å®ç°äº†ä¸€ä¸ªæ ˆã€‚

æ¥ç€ä»‹ç»æµè§ˆå™¨ç¯å¢ƒä¸‹ JavaScript çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ï¼Œå³äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œ JavaScript ä¸»çº¿ç¨‹ä¸æ–­çš„å¾ªç¯å¾€å¤çš„ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­è¯»å–ä»»åŠ¡ï¼ˆå¼‚æ­¥äº‹ä»¶å›è°ƒï¼‰ï¼Œæ”¾å…¥è°ƒç”¨æ ˆä¸­æ‰§è¡Œã€‚è°ƒç”¨æ ˆåˆç§°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆæ‰§è¡Œæ ˆï¼‰ï¼Œæ˜¯ç”¨æ¥ç®¡ç†å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡çš„æ ˆç»“æ„ã€‚

JavaScript çš„å­˜å‚¨æœºåˆ¶åˆ†ä¸ºä»£ç ç©ºé—´ã€æ ˆç©ºé—´ä»¥åŠå †ç©ºé—´ï¼Œä»£ç ç©ºé—´ç”¨äºå­˜æ”¾å¯æ‰§è¡Œä»£ç ï¼Œæ ˆç©ºé—´ç”¨äºå­˜æ”¾åŸºæœ¬ç±»å‹æ•°æ®å’Œå¼•ç”¨ç±»å‹åœ°å€ï¼Œå †ç©ºé—´ç”¨äºå­˜æ”¾å¼•ç”¨ç±»å‹æ•°æ®ï¼Œå½“è°ƒç”¨æ ˆä¸­æ‰§è¡Œå®Œæˆä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œéœ€è¦è¿›è¡Œåƒåœ¾å›æ”¶è¯¥ä¸Šä¸‹æ–‡ä»¥åŠç›¸å…³æ•°æ®ç©ºé—´ï¼Œå­˜æ”¾åœ¨æ ˆç©ºé—´ä¸Šçš„æ•°æ®é€šè¿‡ ESP æŒ‡é’ˆæ¥å›æ”¶ï¼Œå­˜æ”¾åœ¨å †ç©ºé—´çš„æ•°æ®é€šè¿‡å‰¯åƒåœ¾å›æ”¶å™¨ï¼ˆæ–°ç”Ÿä»£ï¼‰ä¸ä¸»åƒåœ¾å›æ”¶å™¨ï¼ˆè€ç”Ÿä»£ï¼‰æ¥å›æ”¶ã€‚

èŠèŠå°±è·‘è¿œäº† ğŸ¤¦â€â™€ï¸ï¼Œä½†éƒ½æ˜¯å‰ç«¯è¿›é˜¶å¿…ä¼šï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹åˆ·æ ˆé¢˜ç›®å§ï¼ï¼ï¼æ¯æ—¥ä¸€åˆ·ï¼Œè¿›é˜¶å‰ç«¯ä¸ç®—æ³• â›½ï¸â›½ï¸â›½ï¸ï¼Œæ¥é“ç®€å•çš„å§ï¼

### å­—èŠ‚&leetcode155ï¼šæœ€å°æ ˆï¼ˆåŒ…å« getMin å‡½æ•°çš„æ ˆï¼‰

è®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚

- `push(x)` â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚
- `pop()` â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚
- `top()` â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚
- `getMin()` â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚

ç¤ºä¾‹:

```js
MinStack minStack = new MinStack();
minStack.push(-2);
minStack.push(0);
minStack.push(-3);
minStack.getMin();   --> è¿”å› -3.
minStack.pop();
minStack.top();      --> è¿”å› 0.
minStack.getMin();   --> è¿”å› -2.
```

ä¸ºäº† ä¿è¯åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆ,å°±ä¸èƒ½åœ¨ getMin å‡½æ•°è¿›è¡Œæ±‚è§£,åœ¨å¼¹æ ˆå’Œå‡ºæ ˆçš„åœ°æ–¹è¿›è¡Œå¤„ç†å°±å¥½

ç¤ºä¾‹ä»£ç :
```js
var MinStack = function () {
  this.items = []
  this.min = null
}
// è¿›æ ˆ
MinStack.prototype.push = function (x) {
  if (!this.items.length) this.min = x
  // æ±‚å‡ºæœ€å°çš„å…ƒç´ 
  this.min = Math.min(x, this.min)
  this.items.push(x)
}

// å‡ºæ ˆ
MinStack.prototype.pop = function () {
  let num = this.items.pop()
  // æ±‚å‡ºæœ€å°çš„å…ƒç´ 
  this.min = Math.min(...this.items)
  return num
}

// è·å–æ ˆé¡¶å…ƒç´ 
MinStack.prototype.top = function () {
  if (!this.items.length) return null
  return this.items[this.items.length - 1]
}

// æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ 
MinStack.prototype.getMin = function () {
  return this.min
}
```
